(function(e){function t(t){for(var a,n,i=t[0],c=t[1],l=t[2],d=0,h=[];d<i.length;d++)n=i[d],o[n]&&h.push(o[n][0]),o[n]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);u&&u(t);while(h.length)h.shift()();return r.push.apply(r,l||[]),s()}function s(){for(var e,t=0;t<r.length;t++){for(var s=r[t],a=!0,i=1;i<s.length;i++){var c=s[i];0!==o[c]&&(a=!1)}a&&(r.splice(t--,1),e=n(n.s=s[0]))}return e}var a={},o={app:0},r=[];function n(t){if(a[t])return a[t].exports;var s=a[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=e,n.c=a,n.d=function(e,t,s){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(s,a,function(t){return e[t]}.bind(null,a));return s},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var u=c;r.push([0,"vendors~253ae210","vendors~7274e1de","vendors~bbefaa35","vendors~6549ae0f","vendors~d556ed5a","vendors~f9ca8911","vendors~4b106089","vendors~fdc6512a","vendors~0605657e"]),s()})({0:function(e,t,s){e.exports=s("56d7")},"4b30":function(e,t,s){},"4f44":function(e,t,s){},"56d7":function(e,t,s){"use strict";s.r(t);var a=s("2b0e"),o=s("bc3a"),r=s.n(o),n=s("9f7b"),i=s.n(n),c=s("b50c"),l=s("8e5f"),u=s.n(l),d=(s("70ef"),s("8c4f")),h=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"app"}},[s("div",{staticClass:"container-fluid"},[s("div",{staticClass:"row"},[s("topNav",{staticClass:"v-step-0",attrs:{tags:e.tags}}),s("router-view",{attrs:{name:"Content"}})],1)])])},p=[],m=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("nav",{staticClass:"navbar fixed-top flex-md-nowrap shadow ml-auto px-2"},[s("a",{staticClass:"navbar-brand text-center m-0",attrs:{href:"#"}},[e._v("corpsum")]),s("multiselect",{staticClass:"ml-2 query-type-selector",attrs:{options:e.queryAttributeOptions,searchable:!1,"close-on-select":!0,"show-labels":!1,"allow-empty":!1,"track-by":"name",label:"name",placeholder:"Query attribute"},on:{close:e.moveFocusToInput},scopedSlots:e._u([{key:"option",fn:function(t){var a=t.option;return[e._v("\n        "+e._s(a.name)+" "),s("span",{staticClass:"ml-auto"},[e._v(e._s(a.desc))])]}}]),model:{value:e.queryAttribute,callback:function(t){e.queryAttribute=t},expression:"queryAttribute"}}),s("vue-tags-input",{ref:"searchInput",staticClass:"mr-auto",attrs:{"element-id":"queryTerms",tags:e.tags,placeholder:"Type your query and hit enter","add-from-paste":!1,"add-on-blur":!1,"max-tags":6},on:{"before-adding-tag":e.tagAdded,"before-deleting-tag":e.tagRemoved},model:{value:e.tag,callback:function(t){e.tag=t},expression:"tag"}}),s("div",{directives:[{name:"show",rawName:"v-show",value:e.loadingStatus,expression:"loadingStatus"}],staticClass:"topnav-spinner text-center"},[s("span",[e._v("Querying the corpus, please wait.")]),s("b-spinner",{attrs:{variant:"primary",label:"Text Centered"}})],1),s("b-modal",{attrs:{id:e.chartInfoModal.id,title:e.chartInfoModal.title,size:"lg","ok-only":"",scrollable:""}},[e._v(e._s(e.chartInfoModal.content))])],1)},f=[],y=s("c7a0"),b=s.n(y),g=s("0a35"),v={name:"topNav",props:{tags:Array},components:{VueTagsInput:b.a,SearchIcon:g["h"],GithubIcon:g["d"],HelpCircleIcon:g["f"]},data(){return{tag:"",toggleSpinner:!1,chartInfoModal:{id:"info-modal-query-examples",title:"Query Examples",content:"Here are some examples"},queryAttribute:{name:"Custom query",value:"custom",desc:"Write your own query in CQL"},queryAttributeOptions:[{name:"Custom query",value:"custom",desc:"Write your own query in CQL"},{name:'[word="keyword"]',value:"word",desc:"A word form, case sensitive"},{name:'[lemma="keyword"]',value:"lemma",desc:"A lemma, case sensitive"},{name:'[lc="keyword"]',value:"lc",desc:"Lowercase word form, case insensitve"},{name:'[lc=".*keyword.*"]',value:"lc-comp",desc:"Lc. keyword incl. compositions, case insensitve"}]}},computed:{},methods:{moveFocusToInput(){this.$refs.searchInput.$el.querySelector(".ti-new-tag-input").focus()},restartTour(){this.$tours["myTour"].start()},startQueryOnClick(){console.log(this.$refs.searchInput),this.$refs.searchInput.performAddTags(this.tag)},tagAdded(e){switch(this.tag="",this.queryAttribute.value){case"word":e.tag.text=`[word="${e.tag.text}"]`;break;case"lemma":e.tag.text=`[lemma="${e.tag.text}"]`;break;case"lc":e.tag.text=`[lc="${e.tag.text.toLowerCase()}"]`;break;case"lc-comp":e.tag.text=`[lc=".*${e.tag.text.toLowerCase()}.*"]`;break;case"custom":e.tag.text=e.tag.text;break;default:e.tag.text=`[word="${e.tag.text}"]`}"analysis"!==this.$router.currentRoute.name&&this.$router.push({name:"analysis"}),this.$store.commit("queryTermAdded",e.tag),this.$store.dispatch("corpusQuery",e.tag.text)},tagRemoved(e){this.tag="","analysis"!==this.$router.currentRoute.name&&this.$router.push({name:"analysis"}),this.$store.commit("queryTermRemoved",e.tag)}},computed:{loadingStatus(){return this.$store.getters.loadingStatus}},watch:{}},w=v,k=(s("ce29"),s("2877")),x=Object(k["a"])(w,m,f,!1,null,null,null),C=x.exports,I=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("nav",{staticClass:"d-none d-md-block sidebar"},[s("div",{staticClass:"sidebar-sticky p-0"},[s("a",{staticClass:"navbar-brand text-center m-0",attrs:{href:"#"}},[e._v("corpsum")]),e._m(0),s("b-form-select",{staticClass:"corpus-selector",attrs:{options:e.optionsProviders,size:"sm"},on:{change:e.changeProvider},model:{value:e.selectedProvider,callback:function(t){e.selectedProvider=t},expression:"selectedProvider"}}),e._m(1),s("b-form-select",{staticClass:"corpus-selector",attrs:{options:e.optionsCorpora,size:"sm"},on:{change:e.changeCorpus},model:{value:e.selectedCorpus,callback:function(t){e.selectedCorpus=t},expression:"selectedCorpus"}}),e._m(2),s("b-form-select",{staticClass:"corpus-selector",attrs:{options:e.subcorporaList,size:"sm"},on:{change:e.changeSubcorpus},model:{value:e.selectedSubcorpus,callback:function(t){e.selectedSubcorpus=t},expression:"selectedSubcorpus"}}),e._m(3),s("ul",{staticClass:"nav flex-column"},[s("li",{staticClass:"nav-item"},[s("router-link",{staticClass:"nav-link",attrs:{to:{name:"analysis",params:{id:e.selectedProvider}}}},[s("activity-icon"),e._v("\n          Corpus Analysis\n        ")],1)],1)])],1)])},D=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("h6",{staticClass:"sidebar-heading d-flex justify-content-between align-items-center mt-4 mb-1"},[s("span",[e._v("Data Provider:")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("h6",{staticClass:"sidebar-heading d-flex justify-content-between align-items-center mt-3 mb-1"},[s("span",[e._v("Active Corpus:")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("h6",{staticClass:"sidebar-heading d-flex justify-content-between align-items-center mt-3 mb-1"},[s("span",[e._v("Subcorpus:")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("h6",{staticClass:"sidebar-heading d-flex justify-content-between align-items-center mt-4 mb-1"},[s("span",[e._v("Anaylsis:")])])}],T={name:"sideNav",components:{HardDriveIcon:g["e"],ActivityIcon:g["a"],UserIcon:g["j"],SettingsIcon:g["i"],RotateCcwIcon:g["g"]},data(){return{selectedProvider:this.$route.params.id,optionsProviders:[{value:"acdh",text:"ACDH - ÖAW"}],optionsCorpora:[{value:"mara001_1000",text:"MARA 1000"}]}},mounted(){localStorage.selectedCorpus&&this.$store.commit("changeSelectedCorpus",localStorage.selectedCorpus),localStorage.selectedSubcorpus&&this.$store.commit("changeSelectedSubcorpus",localStorage.selectedSubcorpus)},computed:{subcorporaList(){return this.$store.getters.subcorporaList},selectedCorpus(){return localStorage.selectedCorpus?localStorage.selectedCorpus:this.$store.getters.corpusName},selectedSubcorpus(){return localStorage.selectedSubcorpus?localStorage.selectedSubcorpus:this.$store.getters.subcorpusName}},methods:{changeProvider(e){this.$router.push({name:"info",params:{id:e}})},changeCorpus(e){this.$store.commit("changeSelectedCorpus",e),localStorage.selectedCorpus=e},changeSubcorpus(e){this.$store.commit("changeSelectedSubcorpus",e),localStorage.selectedSubcorpus=e}}},S=T,q=(s("f5a4"),Object(k["a"])(S,I,D,!1,null,null,null)),A=q.exports,$={name:"App",components:{topNav:C,sideNav:A},mixins:[],data(){return{tourCallbacks:{onStop:this.onTourComplete},steps:[{target:".v-step-0",content:"Using this search bar you can make queries in the corpus by typing your query and hitting enter to search."},{target:".query-type-selector",content:"The selected query type will be applied to your search. You can click this selector to see the descriptions of different type of queries."},{target:".sidebar-sticky",content:"Using selectors on this sidebar you can select your active corpus and subcorpus. You can also switch between different pages such as Corpus Info and Corpus Analysis.",params:{placement:"left-start"}},{target:".feather-info",content:"If you want to more know about a component click this info button to open the information window.",params:{enableScrolling:!1}},{target:".feather-list",content:"You can click this button to see the data behind the chart as a table.",params:{enableScrolling:!1}},{target:".feather-download",content:"You can click this button to download the data as CSV.",params:{enableScrolling:!1}},{target:".feather-image",content:"You can click this button to download the chart as an SVG.",params:{enableScrolling:!1}}]}},created(){},mounted(){this.$store.dispatch("getSubcorporaList"),this.$store.dispatch("queryCorpusInfo"),localStorage.tourCompleted},computed:{tags(){return this.$store.getters.queryTerms}},watch:{},methods:{onTourComplete(){localStorage.tourCompleted=!0}}},_=$,R=(s("60bc"),s("5c64"),Object(k["a"])(_,h,p,!1,null,null,null)),M=R.exports,P=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("main",{staticClass:"px-4 w-100",attrs:{role:"main"}},[s("div",{staticClass:"home pt-3"},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.toggleIntroSection,expression:"toggleIntroSection"}],staticClass:"row vis-intro-wrapper"},[s("div",{staticClass:"col-md-12 vis-component"},[s("div",{staticClass:"vis-component-inner"},[s("b-jumbotron",{staticClass:"py-3 mb-3",attrs:{"bg-variant":"white","header-level":"4"}},[s("template",{slot:"header"},[e._v("Corpus Analysis")]),s("template",{slot:"lead"},[e._v("\n              This dashboard allows you to analyze the results of your corpus queries in multiple dimensions and with visualization components.\n              "),s("br"),e._v("\n              You can start by typing your query in the above search bar.\n            ")])],2)],1)])]),s("div",{directives:[{name:"show",rawName:"v-show",value:e.toggleVisSection,expression:"toggleVisSection"}],staticClass:"row vis-wrapper"},e._l(e.chartElements,function(t,a){return s(t.component,{key:t.key,tag:"component",class:t.class,attrs:{chartProp:e.chartData[t.chartProp],elKey:a}})}),1)])])},N=[],F=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("b-container",{staticClass:"vis-component-inner",style:{height:e.height},attrs:{fluid:""}},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.isBusy,expression:"isBusy"}],staticClass:"component-loading-overlay"},[s("div",{staticClass:"text-center text-success my-2 mt-5"},[s("b-spinner",{staticClass:"align-middle"}),s("strong",[e._v("Loading...")])],1)]),s("b-row",{staticClass:"py-3"},[s("div",{staticClass:"ml-3 mr-auto d-flex align-items-center"},[s("b-form-group",{staticClass:"mb-0"},[s("b-input-group",{attrs:{size:"sm"}},[s("b-form-input",{attrs:{placeholder:"Type to Filter"},model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}}),s("b-input-group-append",[s("b-button",{attrs:{variant:"primary",disabled:!e.filter},on:{click:function(t){e.filter=""}}},[e._v("Clear")])],1)],1)],1)],1),s("div",{staticClass:"mr-3 d-flex align-items-center"},[s("div",{staticClass:"mr-2"},[e._v("Total rows: "+e._s(e.totalVisibleRows))]),s("b-pagination",{staticClass:"my-0",attrs:{"total-rows":e.totalRows,"per-page":e.perPage},model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}})],1)]),s("div",{staticClass:"kwic-table"},[s("b-table",{ref:"table",staticClass:"text-nowrap",attrs:{"show-empty":"",small:"",striped:"",bordered:"",items:e.items,fields:e.fields,"current-page":e.currentPage,"per-page":e.perPage,filter:e.filter,"sort-by":e.sortBy,"sort-desc":e.sortDesc,"sort-direction":e.sortDirection},on:{"update:sortBy":function(t){e.sortBy=t},"update:sort-by":function(t){e.sortBy=t},"update:sortDesc":function(t){e.sortDesc=t},"update:sort-desc":function(t){e.sortDesc=t},filtered:e.onFiltered},scopedSlots:e._u([{key:"actions",fn:function(t){return[s("b-link",{staticClass:"mr-1",on:{click:function(s){return e.info(t.item,t.index,s.target)}}},[s("file-text-icon")],1)]}},{key:"HEAD_selected",fn:function(t){return[s("input",{attrs:{type:"checkbox"},on:{change:function(t){return e.toggleSelectAllDocs(t.target.checked)}}})]}},{key:"selected",fn:function(t){return[s("b-form-group",{staticClass:"mb-0"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.item.selected,expression:"row.item.selected"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.item.selected)?e._i(t.item.selected,null)>-1:t.item.selected},on:{change:[function(s){var a=t.item.selected,o=s.target,r=!!o.checked;if(Array.isArray(a)){var n=null,i=e._i(a,n);o.checked?i<0&&e.$set(t.item,"selected",a.concat([n])):i>-1&&e.$set(t.item,"selected",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(t.item,"selected",r)},function(s){return e.toggleSelectedDocs(t.item)}]}})])]}},{key:"hitsNo",fn:function(t){return[e._v("\n            "+e._s(t.item.hitsNo)+"\n          ")]}},{key:"row-details",fn:function(t){return[s("b-card",[s("ul",e._l(t.item,function(t,a){return s("li",{key:a},[e._v(e._s(a)+": "+e._s(t))])}),0)])]}},e._l(e.annotationFields,function(t,a){return{key:t.key,fn:function(o){return["html"===t.type?s("div",{key:a},[o.item[t.key]?s("span",[e._v("\n                Yes\n                "),s("b-link",{staticClass:"mr-1",on:{click:function(t){return e.info(o.item,o.index,t.target)}}},[s("external-link-icon")],1)],1):s("span",[e._v("No")])]):"boolean"===t.type?s("div",{key:a},[s("b-form-checkbox",{attrs:{value:"true","unchecked-value":"false"},on:{change:function(s){e.changeAnnotation(s,t.key,o.item.docid,e.perPage*(e.currentPage-1)+o.index,"boolean")}},model:{value:o.item[t.key],callback:function(s){e.$set(o.item,t.key,s)},expression:"row.item[field.key]"}})],1):"vocabulary"===t.type?s("div",{key:a},[s("multiselect",{attrs:{"tag-placeholder":"Add annotation",placeholder:"Add annotation",options:t.options,multiple:!0,"track-by":"title",label:"title",taggable:!0},on:{select:function(s){e.addAnnotation(s.title,t.key,o.item.docid,e.perPage*(e.currentPage-1)+o.index,"vocabulary")},remove:function(s){e.removeAnnotation(s,t.key,e.perPage*(e.currentPage-1)+o.index,o.item[t.key])},tag:function(s){e.addNewAnnoVocabulary(s,t.key,o.item.docid,e.perPage*(e.currentPage-1)+o.index,"vocabulary")}},model:{value:o.item[t.key],callback:function(s){e.$set(o.item,t.key,s)},expression:"row.item[field.key]"}})],1):e._e()]}}})],null,!0)})],1),s("b-modal",{attrs:{id:e.infoModal.id,title:e.infoModal.title,size:"xl",scrollable:""},on:{hide:e.resetInfoModal},scopedSlots:e._u([{key:"modal-footer",fn:function(t){var a=t.ok;return[s("b-button-group",{staticClass:"mr-auto"},[s("b-button",{attrs:{variant:"info"},on:{click:function(t){return e.prevDoc()}}},[e._v("‹ Previous")]),s("b-button",{attrs:{variant:"info"},on:{click:function(t){return e.nextDoc()}}},[e._v("Next ›")])],1),s("b-button",{attrs:{variant:"primary"},on:{click:function(e){return a()}}},[e._v("\n            OK\n          ")])]}}])},[e.annotationFields?s("div",{staticClass:"docviewer-anno-wrapper sticky-top bg-light"},[s("h5",[e._v("Annotations")]),s("b-table",{staticClass:"text-nowrap",attrs:{"show-empty":"",small:"",bordered:"",stacked:"md",items:[e.sortedItemsKWIC[e.infoModal.rowId]],fields:e.annotationFields},scopedSlots:e._u([e._l(e.annotationFields,function(t,a){return{key:t.key,fn:function(o){return["html"===t.type?s("div",{key:a},[e.sortedItemsKWIC[e.infoModal.rowId][t.key]?s("span",[e._v("Yes")]):s("span",[e._v("No")])]):"boolean"===t.type?s("div",{key:a},[s("b-form-checkbox",{attrs:{value:"true","unchecked-value":"false"},on:{change:function(s){return e.changeAnnotation(s,t.key,e.sortedItemsKWIC[e.infoModal.rowId].docid,e.infoModal.rowId,"boolean")}},model:{value:e.sortedItemsKWIC[e.infoModal.rowId][t.key],callback:function(s){e.$set(e.sortedItemsKWIC[e.infoModal.rowId],t.key,s)},expression:"sortedItemsKWIC[infoModal.rowId][field.key]"}})],1):"vocabulary"===t.type?s("div",{key:a},[s("multiselect",{attrs:{"tag-placeholder":"Add annotation",placeholder:"Add annotation",options:t.options,multiple:!0,"track-by":"title",label:"title",taggable:!0},on:{select:function(s){return e.addAnnotation(s.title,t.key,e.sortedItemsKWIC[e.infoModal.rowId].docid,e.infoModal.rowId,"vocabulary")},remove:function(s){return e.removeAnnotation(s,t.key,e.infoModal.rowId,e.sortedItemsKWIC[e.infoModal.rowId][t.key])},tag:function(s){return e.addNewAnnoVocabulary(s,t.key,e.sortedItemsKWIC[e.infoModal.rowId].docid,e.infoModal.rowId,"vocabulary")}},model:{value:e.sortedItemsKWIC[e.infoModal.rowId][t.key],callback:function(s){e.$set(e.sortedItemsKWIC[e.infoModal.rowId],t.key,s)},expression:"sortedItemsKWIC[infoModal.rowId][field.key]"}})],1):e._e()]}}})],null,!0)}),e._l(e.annotationFields,function(t,a){return["html"===t.type?s("div",{key:a},[s("b-form-textarea",{attrs:{id:"textarea-auto-height",placeholder:"Enter your annotation comments here",rows:"2","max-rows":"5"},on:{blur:function(s){return e.addAnnotation(e.sortedItemsKWIC[e.infoModal.rowId][t.key],t.key,e.sortedItemsKWIC[e.infoModal.rowId].docid,e.infoModal.rowId,"html")}},model:{value:e.sortedItemsKWIC[e.infoModal.rowId][t.key],callback:function(s){e.$set(e.sortedItemsKWIC[e.infoModal.rowId],t.key,s)},expression:"sortedItemsKWIC[infoModal.rowId][field.key]"}}),s("b-button",{staticClass:"mt-2",attrs:{variant:"info",size:"sm"},on:{click:function(s){return e.addAnnotation(e.sortedItemsKWIC[e.infoModal.rowId][t.key],t.key,e.sortedItemsKWIC[e.infoModal.rowId].docid,e.infoModal.rowId,"html")}}},[e._v("Save Comments")])],1):e._e()]})],2):e._e(),s("p",{domProps:{innerHTML:e._s(e.modalTextContent)}}),s("pre",[e._v(e._s(e.infoModal.content))])]),s("b-modal",{attrs:{id:e.subcorpusModal.id,title:e.subcorpusModal.title,size:"lg","ok-only":"",scrollable:""}},[s("b-form-group",{attrs:{id:"subcorpus-title-fieldset",label:"Subcorpus Name","label-for":"subcorpus-title-input","invalid-feedback":e.invalidFeedback,"valid-feedback":e.validFeedback,state:e.subcorpusTitleState}},[s("b-form-input",{attrs:{id:"subcorpus-title-input",state:e.subcorpusTitleState,trim:""},model:{value:e.subcorpusTitle,callback:function(t){e.subcorpusTitle=t},expression:"subcorpusTitle"}})],1),e._v("\n        You have selected "+e._s(e.selectedDocs.length)+" documents for this new subcorpus.\n        "),s("template",{slot:"modal-footer"},[s("b-button",{staticClass:"mr-auto d-block",attrs:{variant:"primary"},on:{click:function(t){return e.createSubcorpus()}}},[e._v("Create Subcorpus")]),s("b-toast",{attrs:{id:"example-toast",title:"BootstrapVue",static:"","no-auto-hide":""}},[e._v("\n            Hello, world! This is a toast message.\n          ")])],1)],2)],1)],1)},W=[],L={props:{chartProp:Object},components:{FileTextIcon:g["c"],ExternalLinkIcon:g["b"]},data(){return{selectedDocs:[],fields:this.chartProp.fields,height:this.chartProp.height+"px",annotationFields:this.chartProp.annotationFields,currentPage:1,perPage:15,pageOptions:[10,15,20],sortBy:"null",sortDesc:!1,sortDirection:"asc",filter:null,infoModal:{id:"info-modal",title:"",content:"",rowId:0},subcorpusModal:{id:"create-subcorpus-modal",title:"Create a subcorpus",content:""},totalVisibleRows:this.chartProp.items.length,subcorpusTitle:""}},computed:{sortedItemsKWIC(){return this.$refs.table?this.$refs.table.sortedItems:this.chartProp.items},sortOptions(){return this.fields.filter(e=>e.sortable).map(e=>{return{text:e.label,value:e.key}})},items(){return this.chartProp.items},isBusy(){return this.chartProp.isBusy},annotationOptions(){return this.chartProp.annotationOptions},totalRows:{get:function(){return this.chartProp.totalRows},set:function(e){this.chartProp.totalRows=e}},modalTextContent(){return this.$store.getters.modalTextContent},tags(){return this.$store.getters.queryTerms},subcorpusTitleState(){return this.subcorpusTitle.length>=4},invalidFeedback(){return this.subcorpusTitle.length>4?"":this.subcorpusTitle.length>0?"Enter at least 4 characters":"This field is required"},validFeedback(){return this.subcorpusTitleState,""}},mounted(){},watch:{items(e){this.totalVisibleRows=e.length}},methods:{addNewAnnoVocabulary(e,t,s,a,o){this.$store.dispatch("addNewAnnoVocabulary",{annoContent:e,annoClass:t,docID:s,rowIndex:a,annoType:o})},changeAnnotation(e,t,s,a,o){this.addAnnotation(e,t,s,a,o)},addAnnotation(e,t,s,a,o){void 0===e&&(e=""),this.$store.dispatch("addAnnotation",{annoContent:e,annoClass:t,docID:s,rowIndex:a,annoType:o})},removeAnnotation(e,t,s,a){let o=e.annoID;if(!o){const a=Object.keys(this.items[s][t]).find(a=>this.items[s][t][a].title===e.title);o=this.items[s][t][a].annoID}this.$store.dispatch("removeAnnotation",{annoID:o})},createSubcorpus(){this.$store.dispatch("createSubcorpus",{docs:this.selectedDocs,title:this.subcorpusTitle}),this.subcorpusTitleState&&this.selectedDocs.length>0&&this.$root.$emit("bv::hide::modal",this.subcorpusModal.id)},nextDoc(){const e=this.infoModal.rowId;let t=e;do{t++}while(this.$refs.table.sortedItems[[t]].docid==this.$refs.table.sortedItems[[e]].docid);const s=this.$refs.table.sortedItems[[t]];this.infoModal.title=s.source+" - "+s.date,this.infoModal.rowId=t,this.modalTextContent="",this.$store.dispatch("modalTextQuery",s),this.infoModal.content=JSON.stringify(s,null,2)},prevDoc(){const e=this.infoModal.rowId;let t=e;do{t--}while(this.$refs.table.sortedItems[[t]].docid==this.$refs.table.sortedItems[[e]].docid);const s=this.$refs.table.sortedItems[[t]];this.infoModal.title=s.source+" - "+s.date,this.infoModal.rowId=t,this.modalTextContent="",this.$store.dispatch("modalTextQuery",s),this.infoModal.content=JSON.stringify(s,null,2)},info(e,t,s){this.infoModal.title=e.source+" - "+e.date,this.infoModal.rowId=this.perPage*(this.currentPage-1)+t,this.modalTextContent="",this.$store.dispatch("modalTextQuery",e),this.infoModal.content=JSON.stringify(e,null,2),this.$root.$emit("bv::show::modal",this.infoModal.id,s)},resetInfoModal(){this.infoModal.title="",this.infoModal.content=""},onFiltered(e){this.totalVisibleRows=e.length,this.totalRows=e.length,this.currentPage=1},subcorpus(e){this.$root.$emit("bv::show::modal",this.subcorpusModal.id,e)},toggleSelectAllDocs(e){if(console.log(e),e){for(let e=0;e<this.items.length;e+=1)this.selectedDocs.includes(this.items[e].docid)||this.selectedDocs.push(this.items[e].docid);for(let e=0;e<this.items.length;e+=1)this.items[e].selected=!0}else{this.selectedDocs=[];for(let e=0;e<this.items.length;e+=1)this.items[e].selected=!1}},toggleSelectedDocs(e){if(e.selected)this.selectedDocs.push(e.docid);else for(let t=this.selectedDocs.length-1;t>=0;t--)this.selectedDocs[t]===e.docid&&this.selectedDocs.splice(t,1);for(let t=0;t<this.items.length;t+=1)this.items[t].docid==e.docid&&(this.items[t].selected=e.selected)}}},z=L,O=(s("996a"),Object(k["a"])(z,F,W,!1,null,null,null)),j=O.exports,K={name:"analysis",components:{kwicTable:j},data(){return{}},created(){console.log("created")},mounted(){console.log("mounted"),this.exampleQuery()},watch:{},computed:{chartData(){return this.$store.getters.chartData},chartElements(){return this.$store.getters.chartElements},toggleIntroSection(){return this.$store.getters.toggleIntroSection},toggleVisSection(){return this.$store.getters.toggleVisSection}},methods:{resetQuery(){this.$store.dispatch("corpusQuery","Ball")},exampleQuery(){const e=[{text:'[lemma="Roboter"] | [word="Robotik"] | [lc="künstlich.*"] [word="Intelligenz"] | [word="Artificial"] [word="Intelligence"] | [word="Algorithmen"] | [word="Automatisierung"]',tiClasses:["ti-valid"]}];for(let t=0;t<e.length;t+=1)this.$store.commit("queryTermAdded",e[t]),this.$store.dispatch("corpusQuery",e[t].text)},changeSampleQuery(e){if(console.log(this.initialChartDataState),1==e){const e=["coche","carro","auto"];this.$store.commit("resetChartData",this.initialChartDataState),this.$store.commit("resetQueryTerms",e)}else if(2==e){const e=["teléfono celular","teléfono móvil"];this.$store.commit("resetChartData",this.initialChartDataState),this.$store.commit("resetQueryTerms",e)}else if(3==e){const e=["Iraq","Irak"];this.$store.commit("resetChartData",this.initialChartDataState),this.$store.commit("resetQueryTerms",e)}},onQueryTermAdded(e){console.log(e)},onQueryTermRemoved(e){this.chartData.temporal.absolute=this.chartData.temporal.absolute.filter(t=>t.name!==e),this.chartData.temporal.relative=this.chartData.temporal.relative.filter(t=>t.name!==e),this.chartData.regional.countries=this.chartData.regional.countries.filter(t=>t.name!==e),this.chartData.dispersion=this.chartData.dispersion.filter(t=>t.name!==e),this.chartData.types=this.chartData.types.filter(t=>t.name!==e),this.$store.commit("chartDataUpdate",this.chartData)}}},B=K,E=Object(k["a"])(B,P,N,!1,null,null,null),Q=E.exports;a["default"].use(d["a"]);var V=new d["a"]({routes:[{path:"/",name:"root",redirect:e=>{return"rae"!==e.params.id||"acdh"!==e.params.id?"/acdh/analysis":e.fullPath}},{path:"/:id",component:M,children:[{path:"analysis",name:"analysis",components:{Content:Q}},{path:"analysis/:corpus/:subcorpus/:query",name:"analysis",components:{Content:Q}},{path:"analysis/:corpus/:subcorpus",name:"analysis",components:{Content:Q}},{path:"analysis/:corpus",name:"analysis",components:{Content:Q}}]},{path:"",redirect:{name:"analysis"}}]}),Y=s("2f62");function U(e,t,s){return s?Object.keys(e).find(a=>e[a][s]===t):Object.keys(e).find(s=>e[s]===t)}a["default"].prototype.$http=r.a,a["default"].prototype.axios=r.a,a["default"].use(Y["a"]);const H={engineAPI:"https://corpsum-proxy.acdh-dev.oeaw.ac.at/run.cgi/",engineAPINoCache:"https://noske-corpsum.acdh-dev.oeaw.ac.at/run.cgi/",corpusName:"mara002_1500",subcorpusName:"none",subcorporaList:[{value:"none",text:"None"}],rawResults:[],modalTextContent:"",loadingStatus:!1,toggleIntroSection:!0,toggleVisSection:!1,corpusInfo:{docsrcSizes:[],ressortSizes:[]},chartElements:[{component:"kwicTable",class:"col-md-12 vis-component",chartProp:"kwic"}],infoElements:[{component:"corpusInfoJumbotron",class:"col-md-12 vis-component vis-intro-component",chartProp:"corpusBasicInfo"},{component:"areaChart",class:"col-md-6 vis-component",chartProp:"docsYears"},{component:"barChart",class:"col-md-6 vis-component",chartProp:"docsRegions"},{component:"basicTable",class:"col-md-6 vis-component no-min-height",chartProp:"corpInfoTable"},{component:"scatterChart",class:"col-md-6 vis-component no-min-height",chartProp:"topLemmas"},{component:"treemapChart",class:"col-md-6 vis-component",chartProp:"docsSources"},{component:"treemapChart",class:"col-md-6 vis-component",chartProp:"docsRessorts"}],infoData:{corpusBasicInfo:{logo:"https://www.oeaw.ac.at/fileadmin/_processed_/6/8/csm_acdh_projects_amc_logo_web_a92e4e1d33.png",desc:"The Austrian Media Corpus (amc), created as part of a cooperation between the Austrian Academy of Sciences and the Austrian Press Agency (APA), covers the entire Austrian media landscape of the past decades, comprising a wide range of text types which can be classified as journalistic prose. Altogether, the corpus contains 40 million texts, constituting more than 10 billion tokens. In comparison to other contemporary German language corpora, the amc ranks among the largest collection of its kind."},docsYears:{title:"Number of Documents per Year",subtitle:"This chart displays the yearly distribution of documents in the selected corpus.",yAxisText:"Number of Documents",data:[],pointFormat:'<span style="color:{series.color}">{series.name}</span>: <b>{point.y}</b><br/>'},docsRegions:{title:"Number of Documents per Region",subtitle:"This chart displays the regional distribution of documents in the selected corpus. Every media source has a region identifier. However some media sources can be nation-wide publication or too specific to be categorized under a specific region.",yAxisText:"Number of Documents",categoriesX:["AT-Nationwide","AT-Ost","AT-Südost","AT-Mitte","AT-West","Specific"],series:[]},corpInfoTable:{title:"Unit Sizes of the Corpus",subtitle:"An annotated text corpus consists of structured elements such as documents, paragraphs, sentences, words and tokens. Tokens are the smallest units, which are symbols, numbers and lemmas. The size of a corpus is generally described by its total count of tokens and documents.",items:[],fields:[{key:"unit",label:"Unit",sortable:!0},{key:"count",label:"Count",sortable:!0}],height:360},topLemmas:{title:"The Most Frequent Lemmas",subtitle:"This chart displays the most frequent lemmas in this corpus. On the y-axis the the absolute frequency and on the x-axis the ranking of this word form is displayed. This type of distribution is also known as the <a target='_blank' href='https://en.wikipedia.org/wiki/Zipf%27s_law'>Zipf's Curve / Law</a>, where the ranking of the most frequent words are disproportional with their absolute frequencies.",legendEnabled:!0,series:[],yAxisText:"Absolute Frequency",xAxisText:"Ranking",height:315},docsSources:{title:"Number of Documents per Media Source",subtitle:"This chart displays the distribution of documents in the selected corpus per media source.",data:[]},docsRessorts:{title:"Number of Documents per Newspaper Section",subtitle:"This chart displays the distribution of documents in the selected corpus per newspaper section / ressort.",data:[]}},chartData:{queryTerms:[],separatorQuery:{title:"Query Summary"},separatorYearly:{title:"Diachronic Analysis"},separatorKWIC:{title:"Keyword in Context (KWIC)"},separatorRegional:{title:"Regional Analysis"},separatorDiscourse:{title:"Discourse Analysis"},querySummary:{title:"Total Absolute Frequency and Word Forms",subtitle:"Total absolute number of occurences (hits) of a given query is displayed. If the query has multiple words in results these are displayed in the second level with a click.",yAxisText:"Number of Hits",xAxisType:"category",legendEnabled:!1,series:[{name:"Absolute Frequency",data:[],colorByPoint:!0}]},queryRelSummary:{title:"Total Relative Frequency",subtitle:"Total normalised frequency (per million tokens) of a given query is displayed.",yAxisText:"Frequency per million tokens",xAxisType:"category",legendEnabled:!1,series:[{name:"Normalised Frequency",data:[],colorByPoint:!0}]},wordFreqSummary:{title:"Total Absolute Frequency and Word Forms",subtitle:"Total absolute number of occurences (hits) of a given query is displayed. If the query has multiple words in results these are displayed in the second level with a click.",data:[]},wordTree:{charts:[]},absolute:{title:"Yearly Absolute Frequency",subtitle:"Absolute number of occurences (hits) of a given query in years is displayed.",yAxisText:"Number of Hits",data:[],pointFormat:'<span style="color:{series.color}">{series.name}</span>: <b>{point.y}</b><br/>'},relative:{title:"Yearly Relative Frequency (%)",subtitle:"Relative comparison to the baseline (100%) for the query in years is displayed. This way of distribution shows how much more / less frequent the result of the query in this partition exists in comparison to the whole corpus. 100% represents the average baseline from the whole corpus.",yAxisText:"Relative Frequency (%)",data:[],pointFormat:'<span style="color:{series.color}">{series.name}</span>: <b>{point.y}%</b><br/>',plotLinesY:[{color:"red",dashStyle:"dot",width:2,value:100,label:{rotation:0,x:0,style:{fontStyle:"italic",fontSize:"10"},text:"Baseline (100%)"},zIndex:3}]},sources:{title:"Distribution of Media Sources",subtitle:"This chart displays the absolute number of hits of this query (y-axis) and relative frequency (x-axis) in comparison to the baseline (100%) for the query per media source. Sizes of the points show the absolute size of the media sources in the whole corpus, independent from the given query. Relative Frequency (%) shows how much more / less frequent the result of the query in this partition exists in comparison to the whole corpus. 100% represents the average baseline from the whole corpus.",yAxisText:"Absolute Frequency",xAxisText:"Relative Frequency (%)",plotLinesX:[{color:"red",dashStyle:"dot",width:2,value:100,label:{rotation:0,y:-5,style:{fontStyle:"italic",fontSize:"10"},textAlign:"center",text:"Baseline (100%)"},zIndex:3}],series:[]},sections:{title:"Distribution of Newspaper Sections",subtitle:"This chart displays the absolute number of hits of this query (y-axis) and relative frequency (x-axis) in comparison to the baseline (100%) for the query per newspaper section. Sizes of the points show the absolute size of the newspaper sections in the whole corpus, independent from the given query. Relative Frequency (%) shows how much more / less frequent the result of the query in this partition exists in comparison to the whole corpus. 100% represents the average baseline from the whole corpus.",yAxisText:"Absolute Frequency",xAxisText:"Relative Frequency (%)",plotLinesX:[{color:"red",dashStyle:"dot",width:2,value:100,label:{rotation:0,y:-5,style:{fontStyle:"italic",fontSize:"10"},textAlign:"center",text:"Baseline (100%)"},zIndex:3}],series:[]},collocations:{clouds:[]},regions:{mapTitle:"Regional Relative Frequency (%)",mapSubtitle:"Relative comparison to the baseline (100%) for the query in regions is displayed. This way of distribution shows how much more / less frequent the result of the query in this partition exists in comparison to the whole corpus. 100% represents the average baseline from the whole corpus.",title:"Regional Absolute Frequency",subtitle:"This chart displays the absolute number of occurences (hits) of a given query per regions in the selected corpus. Every media source has a region identifier. However some media sources can be nation-wide publication or too specific to be categorized under a specific region.",yAxisText:"Number of Hits",height:480,legendEnabled:!0,categoriesX:["AT-Nationwide","AT-Ost","AT-Südost","AT-Mitte","AT-West","Specific"],series:[],maps:[]},narrative:{title:"Narrative Forms",type:"column",yAxisText:"Percentage of Absolute Frequencies",stacking:"percent",categories:[],series:[{name:"Fiction",data:[]},{name:"Non-Fiction",data:[]}]},kwic:{items:[],annotationOptions:[],fields:[{key:"actions",label:"View",sortable:!1,thStyle:{width:"45px"},class:"text-center"},{key:"hitsNo",label:"Hits",sortable:!0,thStyle:{width:"45px"}},{key:"date",label:"Date",sortable:!0,thStyle:{width:"100px"}},{key:"source",label:"Source",sortable:!0},{key:"left",label:"Left",sortable:!0,class:"text-right"},{key:"word",label:"Word",sortable:!0,class:"text-center kwic-word"},{key:"right",label:"Right",sortable:!0,class:"text-left"}],height:750,annotationFields:[],isBusy:!1,totalRows:0}}},J=(JSON.parse(JSON.stringify(H)),{resetQueryTerms(e,t){e.chartData.queryTerms=t,console.log(t)},resetChartData(e,t){e.chartData=t,console.log(t)},updateRawResults(e,t){e.rawResults.push(t)},queryTermAdded(e,t){e.chartData.queryTerms.push(t)},queryTermRemoved(e,t){for(let s=e.chartData.queryTerms.length-1;s>=0;s--)if(e.chartData.queryTerms[s].text===t.text){e.chartData.queryTerms.splice(s,1),e.chartData.querySummary.series[0].data.splice(s,1),e.chartData.queryRelSummary.series[0].data.splice(s,1),e.chartData.wordTree.charts.splice(s,1),e.chartData.absolute.data.splice(s,1),e.chartData.relative.data.splice(s,1),e.chartData.regions.maps.splice(s,1),e.chartData.regions.series.splice(s,1),e.chartData.sources.series.splice(s,1),e.chartData.sections.series.splice(s,1),e.chartData.collocations.clouds.splice(s,1);for(let s=e.chartData.wordFreqSummary.data.length-1;s>=0;s--)e.chartData.wordFreqSummary.data[s].parent!==t.text&&e.chartData.wordFreqSummary.data[s].id!==t.text||e.chartData.wordFreqSummary.data.splice(s,1);for(let s=e.chartData.kwic.items.length-1;s>=0;s--)e.chartData.kwic.items[s].queryTerm===t.text&&e.chartData.kwic.items.splice(s,1);break}0===e.chartData.queryTerms.length&&(e.toggleIntroSection=!0,e.toggleVisSection=!1)},changeLoadingStatus(e,t){e.loadingStatus=t.status,!1===t.status&&"intro"!==t.type&&(e.toggleIntroSection=!1,e.toggleVisSection=!0)},processWordFreqSum(e,t){e.chartData.querySummary.series[0].data.push({name:t.term,y:t.processSumResp});let s=e.chartData.querySummary.series[0].data;e.chartData.queryTerms=[];for(let r=0;r<s.length;r+=1)e.chartData.queryTerms.push({text:s[r].name,tiClasses:["ti-valid"]});const a=["#4e79a7","#edc948","#e15759","#76b7b2","#f28e2b","#ff9da7","#FF9655","#FFF263","#6AF9C4"];let o;for(let r=0;r<e.chartData.queryTerms.length;r+=1)if(e.chartData.queryTerms[r].text===t.term){o=r;break}s=t.result.Blocks[0].Items,e.chartData.wordFreqSummary.data.push({id:t.term,name:t.term,color:a[o],sortIndex:o});for(let r=0;r<s.length;r+=1)e.chartData.wordFreqSummary.data.push({name:s[r].Word[0].n,parent:t.term,value:s[r].freq})},processTemporal(e,t){const s=t.result,a={name:t.term,data:[]},o={name:t.term,data:[]};for(let r=0;r<s.length;r+=1)a.data.push([Number(s[r].Word[0].n),s[r].freq]),o.data.push([Number(s[r].Word[0].n),s[r].rel]);a.data.sort((e,t)=>e[0]-t[0]),o.data.sort((e,t)=>e[0]-t[0]),e.chartData.absolute.data.push(a),e.chartData.relative.data.push(o)},processSources(e,t){const s=t.result,a=t.docsrcSize.Items,o={name:t.term,symbol:"circle",data:[]};for(let r=0;r<s.length;r+=1)for(let e=0;e<a.length;e+=1)if(a[e].str===s[r].Word[0].n){o.data.push({x:s[r].rel,y:s[r].freq,z:a[e].freq,source:s[r].Word[0].n});break}e.chartData.sources.series.push(o)},processSections(e,t){const s=t.result,a=t.ressortSize.Items,o={name:t.term,symbol:"circle",data:[]};for(let r=0;r<s.length;r+=1)for(let e=0;e<a.length;e+=1)if(a[e].str===s[r].Word[0].n){o.data.push({x:s[r].rel,y:s[r].freq,z:a[e].freq,source:s[r].Word[0].n});break}e.chartData.sections.series.push(o)},processCollocations(e,t){const s=t.result.Items,a=[];for(let o=0;o<s.length;o+=1)s[o].str.length>1&&a.push({name:s[o].str,weight:s[o].Stats[0].s});e.chartData.collocations.clouds.push({cloudData:{data:a,title:`Collocations Wordcloud: ${t.term}`,subtitle:"This word cloud displays the highest ranking collocations of this query sorted by the logDice score."}})},processRegional(e,t){const s=t.result,a={mapData:{title:"Regional Relative Frequency (%)",queryTerm:t.term,data:[]}},o={name:t.term,data:[0,0,0,0,0,0]};for(let r=0;r<s.length;r+=1){const e=s[r].Word[0].n;let n;switch(e){case"aost":n="AT-Ost",o.data[1]=s[r].freq;break;case"asuedost":n="AT-Südost",o.data[2]=s[r].freq;break;case"amitte":n="AT-Mitte",o.data[3]=s[r].freq;break;case"awest":n="AT-West",o.data[4]=s[r].freq;break;case"agesamt":n="AT-Nationwide",o.data[0]=s[r].freq;break;case"spezifisch":n="Specific",o.data[5]=s[r].freq;break;default:n=""}a.mapData.data.push({query:t.term,name:n,value:s[r].rel})}e.chartData.regions.maps.push(a),e.chartData.regions.series.push(o)},processDispersion(e,t){const s=t.result,a={name:t.term,data:[],pointPlacement:"on"},o=[s[6],s[1],s[7],s[0],s[3],s[4]];for(let r=0;r<o.length;r+=1)a.data.push(o[r].disp);e.chartData.dispersion.series.push(a)},processNarrative(e,t){const s=t.result.data;for(let a=0;a<s.length;a+=1)e.chartData.narrative.series[a].data.push(s[a][2]);e.chartData.narrative.categories.push(t.term)},processCorpInfo(e,t){const s=t.result.sizes;e.infoData.corpInfoTable.items.push({unit:"Documents",count:s.doccount.replace(/\B(?=(\d{3})+(?!\d))/g,".")},{unit:"Paragraphs",count:s.parcount.replace(/\B(?=(\d{3})+(?!\d))/g,".")},{unit:"Sentences",count:s.sentcount.replace(/\B(?=(\d{3})+(?!\d))/g,".")},{unit:"Words",count:s.wordcount.replace(/\B(?=(\d{3})+(?!\d))/g,".")},{unit:"Tokens",count:s.tokencount.replace(/\B(?=(\d{3})+(?!\d))/g,".")})},processKWIC(e,t){const s=t.result.Lines,a=t.annotations,o=t.annotationClasses;for(let n=0;n<s.length;n+=1){let r,i=!1;for(let t=0;t<e.chartData.kwic.items.length;t+=1)if(e.chartData.kwic.items[t].docid===s[n].Tbl_refs[0]){i=!0,r=t;break}if(i)e.chartData.kwic.items[r].hits.push("undefined"!==typeof s[n].Kwic[0]?s[n].Kwic[0].str:""),e.chartData.kwic.items[r].hitsNo++;else{const r={date:s[n].Tbl_refs[1],source:s[n].Tbl_refs[2],source_name:s[n].Tbl_refs[3],region:s[n].Tbl_refs[4],left:"undefined"!==typeof s[n].Left[0]?s[n].Left[0].str:"",word:"undefined"!==typeof s[n].Kwic[0]?s[n].Kwic[0].str:"",right:"undefined"!==typeof s[n].Right[0]?s[n].Right[0].str:"",docid:s[n].Tbl_refs[0],topic:s[n].Tbl_refs[5],toknum:s[n].toknum,selected:!1,queryTerm:t.term,hits:["undefined"!==typeof s[n].Kwic[0]?s[n].Kwic[0].str:""],hitsNo:1};for(let e=0;e<a.length;e+=1)if(a[e].targets[0].id===s[n].Tbl_refs[0]){let t;for(let s=0;s<o.length;s+=1)if(a[e].annotationClass===o[s].id){t=o[s].dataType;break}"vocabulary"===t?Array.isArray(r[a[e].annotationClass])?r[a[e].annotationClass].push({title:a[e].content,annoID:a[e].id}):r[a[e].annotationClass]=[{title:a[e].content,annoID:a[e].id}]:"boolean"!==t&&"html"!==t||(r[a[e].annotationClass]=a[e].content)}e.chartData.kwic.items.push(r)}}e.chartData.kwic.totalRows=e.chartData.kwic.items.length;const r=t.result.Desc[0].rel;e.chartData.queryRelSummary.series[0].data.push({name:t.term,y:r})},processWordTree(e,t){const s={chartData:{title:"The Most Frequent Multilevel Combinations",subtitle:"This chart displays the most frequent multilevel combinations for the given query. From the node in the center one level left and one level right combinations are queried.",data:[],nodes:[]}},a=t.result.Blocks[0].Items;let o=0;for(let r=0;r<a.length&&s.chartData.data.length<20;r+=1)if(a[r]&&!a[r].Word[0].n.match(/[^A-zÀ-ú\s]/gi)&&!a[r].Word[2].n.match(/[^A-zÀ-ú\s]/gi)){s.chartData.nodes.push({id:o,name:a[r].Word[0].n,pos:0});const e=U(s.chartData.nodes,a[r].Word[1].n,"name")||o+1;s.chartData.nodes.push({id:e,name:a[r].Word[1].n,pos:1}),s.chartData.nodes.push({id:o+2,name:a[r].Word[2].n,pos:2}),s.chartData.data.push({from:o,to:e,weight:a[r].freq}),s.chartData.data.push({from:e,to:o+2,weight:a[r].freq}),o+=3}e.chartData.wordTree.charts.push(s)},updateModalTextContent(e,t){const s=t.result.content,a=(t.item.word,t.item.hits);let o="";for(let n=0;n<s.length;n+=1)"coll"===s[n].class&&(s[n].str=` ${s[n].str} `),o+=s[n].str;const r=new RegExp(a.join("|"),"gi");o=o.replace(r,e=>`<span class="kw-highlight">${e}</span>`),e.modalTextContent=o},updateSubcorporaList(e,t){const s=t.result;for(let a=0;a<s.length;a+=1)e.subcorporaList.push({value:s[a].n,text:s[a].n})},changeSelectedCorpus(e,t){e.corpusName=t},changeSelectedSubcorpus(e,t){e.subcorpusName=t},resetState(e,t){e.chartData.queryTerms.push(t)},processDocsYears(e,t){const s=t.result.Items,a={name:"Number of Documents",data:[]};for(let o=0;o<s.length;o+=1)a.data.push([Number(s[o].str),s[o].freq]);a.data.sort((e,t)=>e[0]-t[0]),e.infoData.docsYears.data.push(a)},processDocsRegions(e,t){const s=t.result.Items,a={name:"Documents",data:[0,0,0,0,0,0]};for(let o=0;o<s.length;o+=1){const e=s[o].str;switch(e){case"aost":a.data[1]=s[o].freq;break;case"asuedost":a.data[2]=s[o].freq;break;case"amitte":a.data[3]=s[o].freq;break;case"awest":a.data[4]=s[o].freq;break;case"agesamt":a.data[0]=s[o].freq;break;case"spezifisch":a.data[5]=s[o].freq;break;default:}}e.infoData.docsRegions.series.push(a)},processDocsSources(e,t){const s=t.result.Items;for(let a=0;a<s.length&&a<20;a+=1)e.infoData.docsSources.data.push({id:s[a].str,name:s[a].str,value:s[a].freq,sortIndex:a})},processDocsRessorts(e,t){const s=t.result.Items;for(let a=0;a<s.length&&a<20;a+=1)e.infoData.docsRessorts.data.push({id:s[a].str,name:s[a].str,value:s[a].freq,sortIndex:a})},processAnnoClasses(e,t){const s=t.result;for(let a=0;a<s.length;a+=1){const t=[];for(let e=0;e<s[a].values.length;e+=1)t.push({title:s[a].values[e]});let o;"boolean"===s[a].dataType?o={width:"45px"}:"vocabulary"===s[a].dataType&&(o={width:"250px"}),e.chartData.kwic.annotationFields.push({key:s[a].id,type:s[a].dataType,options:t,label:s[a].title}),e.chartData.kwic.fields.push({key:s[a].id,thStyle:o,label:s[a].title})}},processTopLCs(e,t){const s=t.result.Items,a={type:"line",name:"Zipf's curve",color:"rgba(78, 121, 167, 0.5)",marker:!1,data:[],visible:!1},o=s[0].freq;for(let r=0;r<s.length;r+=1)e.infoData.topLCs.series.push({name:s[r].str,color:"rgba(78, 121, 167, 0.75)",data:[[r,s[r].freq]],showInLegend:!1}),a.data.push(o/(r+1));e.infoData.topLCs.series.push(a)},processTopLemmas(e,t){const s=t.result.Items,a={type:"line",name:"Zipf's curve",color:"rgba(78, 121, 167, 0.5)",marker:!1,data:[],visible:!1},o=s[0].freq;for(let r=0;r<s.length;r+=1)e.infoData.topLemmas.series.push({name:s[r].str,color:"rgba(78, 121, 167, 0.75)",data:[[r,s[r].freq]],showInLegend:!1}),a.data.push(o/(r+1));e.infoData.topLemmas.series.push(a)}}),X={chartData:e=>e.chartData,queryTerms:e=>e.chartData.queryTerms,chartElements:e=>e.chartElements,modalTextContent:e=>e.modalTextContent,corpusName:e=>e.corpusName,subcorpusName:e=>e.subcorpusName,subcorporaList:e=>e.subcorporaList,loadingStatus:e=>e.loadingStatus,toggleIntroSection:e=>e.toggleIntroSection,toggleVisSection:e=>e.toggleVisSection,infoData:e=>e.infoData,infoElements:e=>e.infoElements},Z={async corpusQuery({state:e,commit:t,dispatch:s},a){try{t("changeLoadingStatus",{status:!0});let s=e.corpusName;console.log(V.currentRoute),V.currentRoute.params.corpus&&(s=V.currentRoute.params.corpus);let n=e.subcorpusName;V.currentRoute.params.subcorpus&&(n=V.currentRoute.params.subcorpus),V.currentRoute.params.query&&(a=V.currentRoute.params.query,e.chartData.queryTerms=[],t("queryTermAdded",{text:a,tiClasses:["ti-valid"]}));const i=encodeURIComponent(`aword,${a}`),c={};let l="";"none"!==n&&(l=`usesubcorp=${n};`),c.viewattrsxURI=`${e.engineAPI}view?q=${i};corpname=${s};${l}viewmode=kwic;attrs=word;ctxattrs=word;setattrs=word;allpos=kw;setrefs==doc.id;setrefs==doc.datum;setrefs==doc.region;setrefs==doc.ressort2;setrefs==doc.docsrc;setrefs==doc.docsrc_name;pagesize=1000;newctxsize=30&q=sdoc.datum/ 0>0&format=json;fromp=1`;let u={};u.viewattrsxURI=await r.a.get(c.viewattrsxURI);const d=await r.a.get("https://skeann.acdh-dev.oeaw.ac.at/1/MARA/annotationClasses");if(t("processAnnoClasses",{result:d.data}),void 0!==u.viewattrsxURI.data.numofpages){let t=u.viewattrsxURI.data.nextlink;for(let a=1;a<u.viewattrsxURI.data.numofpages;a+=1){const a=`${e.engineAPI}view?q=${i};corpname=${s};${l}viewmode=kwic;attrs=word;ctxattrs=word;setattrs=word;allpos=kw;setrefs==doc.id;setrefs==doc.datum;setrefs==doc.region;setrefs==doc.ressort2;setrefs==doc.docsrc;setrefs==doc.docsrc_name;pagesize=1000;newctxsize=30&q=sdoc.datum/ 0>0&format=json;${t}`,o=await r.a.get(a);t=o.data.nextlink,u.viewattrsxURI.data.Lines=u.viewattrsxURI.data.Lines.concat(o.data.Lines)}}let h=u.viewattrsxURI.data.Lines;const p=[];if(void 0!==h&&h.length>0){for(let t=0;t<h.length;t+=1)p.push(h[t].Tbl_refs[0]);const e={ids:p},s=await r.a.post("https://skeann.acdh-dev.oeaw.ac.at/1/MARA/annotations/get-by-ske-object-id",e,{headers:{"Content-Type":"application/json"}});t("changeLoadingStatus",{status:!1}),t("processKWIC",{term:a,result:u.viewattrsxURI.data,annotations:s.data.response,annotationClasses:d.data})}t("changeLoadingStatus",{status:!1})}catch(o){console.log(o)}},async modalTextQuery({state:e,commit:t,dispatch:s},a){try{let s=e.corpusName;V.currentRoute.params.corpus&&(s=V.currentRoute.params.corpus);const n=await r.a.get(`${e.engineAPI}structctx?corpname=${s};pos=${a.toknum};struct=doc;format=json`);t("updateModalTextContent",{item:a,result:n.data})}catch(o){console.log(o)}},async addNewAnnoVocabulary({state:e,commit:t,dispatch:s},a){try{e.chartData.kwic.isBusy=!0;const{annoContent:t,annoClass:n,docID:i,rowIndex:c,annoType:l}=a,u={add:[t]},d=await r.a.patch(`https://skeann.acdh-dev.oeaw.ac.at/1/MARA/annotationClasses/${n}/vocabularyTerms`,u,{headers:{"Content-Type":"application/json"}});if(200===d.status){for(let s=0;s<e.chartData.kwic.annotationFields.length;s+=1)if(e.chartData.kwic.annotationFields[s].key===n){e.chartData.kwic.annotationFields[s].options.push({title:t});break}s("addAnnotation",{annoContent:t,annoClass:n,docID:i,rowIndex:c,annoType:l})}}catch(o){console.log(o)}},async addAnnotation({state:e,commit:t,dispatch:s},a){try{e.chartData.kwic.isBusy=!0;const{annoContent:t,annoClass:s,docID:n,rowIndex:i,annoType:c}=a,l={docId:n,annotationClass:s,content:t},u=await r.a.post("https://skeann.acdh-dev.oeaw.ac.at/1/MARA/annotations",l,{headers:{"Content-Type":"application/json"}});if("vocabulary"===c)if(e.chartData.kwic.items[i][s]){e.chartData.kwic.items[i][s].push({annoID:u.data[0].id,title:t});for(let t=e.chartData.kwic.items[i][s].length-1;t>=0;t--)e.chartData.kwic.items[i][s][t].annoID||e.chartData.kwic.items[i][s].splice(t,1)}else e.chartData.kwic.items[i][s]=[{annoID:u.data[0].id,title:t}];else"boolean"!==c&&"html"!==c||(e.chartData.kwic.items[i][s]=t);e.chartData.kwic.isBusy=!1}catch(o){console.log(o)}},async removeAnnotation({state:e,commit:t,dispatch:s},a){try{e.chartData.kwic.isBusy=!0;const{annoID:t}=a;await r.a.delete(`https://skeann.acdh-dev.oeaw.ac.at/1/MARA/annotations/${t}`),e.chartData.kwic.isBusy=!1}catch(o){console.log(o)}},async createSubcorpus({state:e,commit:t,dispatch:s},a){try{const{docs:t,title:n}=a;let i;for(let e=0;e<t.length;e+=1)i+=`;sca_doc.id=${t[e]}`;await r.a.get(`${e.engineAPINoCache}subcorp?corpname=${e.corpusName};reload=;subcname=${n};create=True${i}`),s("getSubcorporaList")}catch(o){console.log(o)}},async getSubcorporaList({state:e,commit:t,dispatch:s}){},async queryCorpusInfo({state:e,commit:t,dispatch:s}){},async corpusQueryData({state:e,commit:t,dispatch:s},a){}};var G={state:H,mutations:J,getters:X,actions:Z};a["default"].use(Y["a"]);var ee=new Y["a"].Store({modules:{corpus:G}});a["default"].component("multiselect",u.a),a["default"].component("text-highlight",c["a"]),a["default"].use(i.a),a["default"].prototype.$http=r.a,a["default"].prototype.axios=r.a,a["default"].config.productionTip=!1,new a["default"]({router:V,store:ee,render(e){return e("router-view")}}).$mount("#app")},"5c64":function(e,t,s){"use strict";var a=s("c2ae"),o=s.n(a);o.a},"70ef":function(e,t,s){},"996a":function(e,t,s){"use strict";var a=s("4b30"),o=s.n(a);o.a},c2ae:function(e,t,s){},ce29:function(e,t,s){"use strict";var a=s("f2c7"),o=s.n(a);o.a},f2c7:function(e,t,s){},f5a4:function(e,t,s){"use strict";var a=s("4f44"),o=s.n(a);o.a}});